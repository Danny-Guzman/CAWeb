jQuery(document).ready(function(){var google_map_api_key="&key=AIzaSyCtq3i8ME-Ab_slI2D8te0Uh2PuAQVqZuE",google_map_url="https://maps.googleapis.com/maps/api/geocode/json?",newLoc,displayCities=$(".located-city-name");function successFunc(pos){var ajax;newLoc=pos.coords.latitude+","+pos.coords.longitude,displayCities.html("Geo Locating..."),$.get(google_map_url+"latlng="+newLoc+google_map_api_key).done(dataSuccess)}function errorCase(){var windowWidth;$(window).width()<767&&$("html, body").animate({scrollTop:0},450),$("#locationSettings").collapse("show");var $input=$("#locationSettings").find("input"),$btn=$("#locationSettings").find("button"),$close_btn=$("#locationSettings").find("button.close");$("#locationSettings").hasClass("show")?$(".geo-lookup").focus():$input.focus(),$input.keypress(function(e){if(13==e.which)return lookByZIP.call(this,e),!1}),$btn.on("click",function(e){e.preventDefault(),lookByZIP.call($input,e)}),$close_btn.on("click",function(e){$(".geo-lookup").focus()})}function lookByZIP(e){var zip=$(this).val();displayCities.html("Geo Locating...");var ajax=$.get(google_map_url+"address="+zip+google_map_api_key);ajax.done(dataSuccess),ajax.fail(function(){displayCities.html("Not Found")})}function dataSuccess(data){var address_components=data.results[0],city,state;if(void 0!==address_components){address_components=address_components.address_components;for(var i=0;i<address_components.length;i++){var types=address_components[i].types;-1!=types.indexOf("locality")&&-1!=types.indexOf("political")&&""!==city&&(city=address_components[i].short_name),-1!=types.indexOf("political")&&-1!=types.indexOf("administrative_area_level_1")&&""!==state&&(state=address_components[i].short_name)}displayCities.html(city+", "+state)}else console.log("Geolocator error: "+data.error_message)}function getCookie(sKey){return sKey&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function hasCookie(sKey){return!!sKey&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}navigator.geolocation.getCurrentPosition(successFunc),$(".geo-lookup").keypress(function(event){var keycode;"13"==(event.keyCode?event.keyCode:event.which)&&$(this).hasClass("collapsed")}),$("#locationSettings .close").keypress(function(event){var keycode=event.keyCode?event.keyCode:event.which}),$(".geo-lookup").on("click",function(e){var currentCookie;if(e.preventDefault(),getCookie("cagov__geo"))return displayCities.html("Enter ZIP"),void errorCase();errorCase()})});