(function(b){var c;var a;b(function(){var d=b(".available-headers");d.imagesLoaded(function(){d.masonry({itemSelector:".default-header",isRTL:!!("undefined"!=typeof isRtl&&isRtl)})});b(document).on("click","div .library-link",function(h){var g=b(this);a=this.name;h.preventDefault();var f=g.data("option");var j=g.data("uploader");var e=j?"":"hidden-upload";var i=g.data("icon-check")&&g.attr("data-icon-check");if(!!f&&f.indexOf(",")>0){f=f.split(",")}if(c){}c=wp.media.frames.customHeader=wp.media({title:g.data("choose"),library:{type:f},uploader:j,button:{text:g.data("update"),close:true}});c.on("select",function(){var p=c.state().get("selection").first(),n=g.data("updateLink");var r=document.getElementById(a);var m=document.getElementById(a+"_img");var q=document.getElementById(a+"_filename");var o={action:"caweb_fav_icon_check",icon_url:p.attributes.url,};if(/\d+_media_image/.test(a)){var k=document.getElementById(a.substring(0,a.indexOf("_"))+"_caweb_nav_media_image_alt_text");r.value=p.attributes.url;k.value=p.attributes.alt}else{if("true"!==i){r.value=p.attributes.url;if(null!==m){m.src=p.attributes.url}if(null!==q){q.value=p.attributes.filename}if(/header_ca_branding/.test(a)){var l=document.getElementById("header_ca_branding_alt_text");l.value=p.attributes.alt}}else{jQuery.post(ajaxurl,o,function(s){if(1==s){m.src=p.attributes.url;r.value=p.attributes.url;q.value=p.attributes.filename}else{alert("Invalid Icon Mime Type: "+p.attributes.filename)}})}}});c.on("open",function(){if(!j){var k=c.el.getElementsByClassName("media-frame-router")[0].getElementsByClassName("media-router")[0].getElementsByClassName("media-menu-item");k[1].click();k[0].parentNode.removeChild(k[0])}});c.open()})})}(jQuery));